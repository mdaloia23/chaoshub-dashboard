(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{179:function(t,e,s){"use strict";s.r(e);var a=s(1),n=s(2),i=s.n(n),n=s(7),r=s.n(n),n=a.a.extend({data:function(){return{members:null,matches:null,user:null}},created:function(){this.$nextTick(function(){this.getOrgMembers()})},methods:{canAddMembers:function(){return this.isOwner()&&!this.isOrgPersonal()},isOrgPersonal:function(){return"personal"===this.members.org.type},isOwner:function(){return this.members.requested_by.org_owner},getOrgMembers:function(){var e=this,t=this.$route.params.org;i.a.get("/"+t+"/settings/members",{headers:{Accept:"application/json"}}).then(function(t){e.members=t.data}).catch(function(t){r()({title:"Failed to retrieve members!",text:t.message,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"})})},findUser:function(){var e=this;e.matches=null,""!==e.user&&null!==e.user&&i.a.get("/users/lookup?user="+e.user,{headers:{Accept:"application/json"}}).then(function(t){e.matches=t.data}).catch(function(t){r()({title:"Failed to looking up users!",text:t.message,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"})})},addUser:function(t){var e=this,s=this.$route.params.org;i.a.post("/"+s+"/settings/members",t,{headers:{Accept:"application/json"}}).then(function(t){t=t.data;""!=t&&null!=t&&e.members.users.push(t)}).catch(function(t){r()({title:"Failed to add user to organization!",text:t.message,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"})})},removeUser:function(t){var e=this,s=this.$route.params.org;i.a.delete("/"+s+"/settings/members/"+t.id,{headers:{Accept:"application/json"}}).then(function(t){e.getOrgMembers()}).catch(function(t){r()({title:"Failed to remove user from organization!",text:t.message,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"})})},asOwner:function(e){var t=this.$route.params.org,s=Object.assign(e);s.org_owner=!0,i.a.patch("/"+t+"/settings/members/"+s.id,s,{headers:{Accept:"application/json"}}).then(function(t){e.org_owner=!0}).catch(function(t){r()({title:"Failed to set user as organization owner!",text:t.message,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"})})},asMember:function(e){var t=this.$route.params.org,s=Object.assign(e);s.org_owner=!1,i.a.patch("/"+t+"/settings/members/"+e.id,s,{headers:{Accept:"application/json"}}).then(function(t){e.org_owner=!1}).catch(function(t){r()({title:"Failed to set user as organization member!",text:t.message,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"})})}}}),a=s(6),s=Object(a.a)(n,function(){var s=this,t=s.$createElement,a=s._self._c||t;return s.members?a("div",{staticClass:"columns"},[s._m(0),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),s._m(3),s._v(" "),s._m(4),s._v(" "),a("div",{staticClass:"column col-12"},[a("div",{staticClass:"columns"},[s._m(5),s._v(" "),a("div",{staticClass:"column col-9"},[s.members.users?a("table",{staticClass:"table table-hover"},[a("tbody",s._l(s.members.users,function(e){return a("tr",{key:e.id},[a("td",[a("div",{staticClass:"columns"},[a("div",{staticClass:"column col-4"},[a("strong",[s._v(s._s(e.profile.username))])]),s._v(" "),a("div",{staticClass:"column col-5"},[a("strong",[s._v(s._s(e.profile.name))])]),s._v(" "),a("div",{staticClass:"column col-2"},[e.org_owner?a("span",[s._v("Owner")]):a("span",[s._v("Member")])]),s._v(" "),s.members.requested_by.org_owner?a("div",{staticClass:"column col-1"},[a("div",{staticClass:"dropdown"},[s._m(6,!0),s._v(" "),a("ul",{staticClass:"menu"},[a("li",{staticClass:"menu-item"},[e.org_owner?a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),s.asMember(e)}}},[s._v("Remove Ownership")]):a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),s.asOwner(e)}}},[s._v("Make Organization Owner")])]),s._v(" "),a("li",{staticClass:"menu-item"},[a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),s.removeUser(e)}}},[s._v("Remove from Organization")])])])])]):s._e()])])])}),0)]):s._e(),s._v(" "),a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item page-prev"},[a("router-link",{attrs:{to:{name:"org_settings_members",page:"members.paging.prev"}}},[s.members.paging.prev?a("div",{staticClass:"page-item-subtitle"},[s._v("Previous")]):a("div",{staticClass:"page-item-subtitle disabled"},[s._v("Previous")])])],1),s._v(" "),a("li",{staticClass:"page-item page-next"},[a("router-link",{attrs:{to:{name:"org_settings_members",page:"members.paging.next"}}},[s.members.paging.next?a("div",{staticClass:"page-item-subtitle"},[s._v("Next")]):a("div",{staticClass:"page-item-subtitle disabled"},[s._v("Next")])])],1)])])])]),s._v(" "),s._m(7),s._v(" "),s.canAddMembers()?a("div",{staticClass:"column col-12"},[a("h6",[s._v("Add User as a Member")]),s._v(" "),a("div",{staticClass:"divider col-11"}),s._v(" "),a("p",[s._v("\n        Add users to your organization so they have access to all its workspaces.\n        If you want to add an user to a single workspace, don't add it to the\n        organization itself but to the appropriate workspace.\n    ")]),s._v(" "),a("form",{on:{submit:function(t){return t.preventDefault(),s.findUser.apply(null,arguments)}}},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column col-9"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label",attrs:{for:"user"}},[s._v("Name")]),s._v(" "),a("div",{staticClass:"has-icon-right"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.user,expression:"user",modifiers:{trim:!0}}],staticClass:"form-input",attrs:{type:"text",id:"user",placeholder:"Name"},domProps:{value:s.user},on:{input:function(t){t.target.composing||(s.user=t.target.value.trim())},blur:function(t){return s.$forceUpdate()}}}),s._v(" "),a("i",{staticClass:"form-icon icon icon-search c-hand",on:{click:s.findUser}})])]),s._v(" "),s.matches?a("ul",{staticClass:"menu"},[a("li",{staticClass:"menu-item"},[a("div",{staticClass:"tile tile-centered"},[a("div",{staticClass:"tile-content"},s._l(s.matches,function(e){return a("div",{key:e.id,staticClass:"columns col-oneline py-1"},[a("div",{staticClass:"column col-10 col-mx-auto"},[e.username?a("span",[s._v(s._s(e.username)+" - ")]):s._e(),s._v(" "),e.name?a("span",[s._v(s._s(e.name))]):s._e()]),s._v(" "),a("div",{staticClass:"column col-2"},[a("button",{staticClass:"float-right btn btn-sm btn-primary btn-action",on:{click:function(t){return t.preventDefault(),s.addUser(e)}}},[a("i",{staticClass:"icon icon-plus c-hand"})])])])}),0)])])]):s._e()])])])]):s._e()]):s._e()},[function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"column col-12"},[e("h5",[t._v("Organization Members")])])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"column col-12"},[t("div",{staticClass:"divider"})])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"column col-12"},[t("div",{staticClass:"p-2"})])},function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"column col-12 text-justify"},[e("p",[t._v("\n      Organization members have access to all workspaces of the organization, whether private or public.\n    ")])])},function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"column col-12"},[e("div",{staticClass:"p-2"}),t._v(" "),e("div",{staticClass:"p-2"}),t._v(" "),e("div",{staticClass:"p-2"})])},function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"column col-11"},[e("h6",[t._v("Members")]),t._v(" "),e("div",{staticClass:"divider"})])},function(){var t=this.$createElement,t=this._self._c||t;return t("button",{staticClass:"btn btn-primary btn-action dropdown-toggle",attrs:{tabindex:"0"}},[t("i",{staticClass:"icon icon-caret"})])},function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"column col-12"},[e("div",{staticClass:"p-2"}),t._v(" "),e("div",{staticClass:"p-2"}),t._v(" "),e("div",{staticClass:"p-2"})])}],!1,null,null,null);e.default=s.exports}}]);