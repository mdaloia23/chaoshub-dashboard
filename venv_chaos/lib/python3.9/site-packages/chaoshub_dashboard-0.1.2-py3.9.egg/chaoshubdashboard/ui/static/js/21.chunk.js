(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{385:function(t,e,i){"use strict";i.r(e);var n=i(1),a=i(2),s=i.n(a),a=i(7),r=i.n(a),a=n.a.extend({data:function(){return{context:{},new_experiment:{title:null,description:null,file:null},workspace:null,workspace_id:null,org:null}},created:function(){this.$nextTick(function(){this.getNewExperimentContext()})},methods:{selectWorkspace:function(t){for(var e=0,i=this.context.workspaces;e<i.length;e++){var n=i[e];if(n.id==this.workspace_id){this.org=n.org.name,this.workspace=n.name;break}}},getNewExperimentContext:function(){var e=this;s.a.get("/experiment/new/context",{headers:{Accept:"application/json"}}).then(function(t){e.context=t.data}).catch(function(t){r()({title:"Failed to retrieve your context!",text:t.message,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"})})},newExperiment:function(){var t,n=this;null!==this.new_experiment.file||""!=this.new_experiment.title&&null!==this.new_experiment.title?null===this.workspace?r()({title:"Oops!",text:"You must select a workspace to add your experiment to",buttonsStyling:!1,confirmButtonClass:"btn btn-primary"}):(t="/"+n.org+"/"+n.workspace+"/experiment",s.a.post(t,n.new_experiment,{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){var e=t.data.id,i=t.data.workspace.name,t=t.data.workspace.org.name;n.$router.push({name:"experiment_default",params:{experiment:e,workspace:i,org:t}})}).catch(function(t){r()({title:"Failed to create your experiment",text:t.message,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"})})):r()({title:"Oops!",text:"You must provide a title and description, or upload an experiment",buttonsStyling:!1,confirmButtonClass:"btn btn-primary"})},handleFileUpload:function(){var t=this,e=new FileReader;e.addEventListener("load",function(){t.new_experiment.file=e.result}.bind(this),!1);var i=this.$refs.expfile.files[0];i&&/\.(json)$/i.test(i.name)&&e.readAsText(i)}}}),n=i(6),i=Object(n.a)(a,function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column col-9 col-mx-auto"},[e("div",{staticClass:"card"},[i._m(0),i._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"title"}},[i._v("Title")]),i._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:i.new_experiment.title,expression:"new_experiment.title"}],staticClass:"form-input",attrs:{id:"title",type:"text",placeholder:"A title clarifies the objective of this experiment"},domProps:{value:i.new_experiment.title},on:{input:function(t){t.target.composing||i.$set(i.new_experiment,"title",t.target.value)}}}),i._v(" "),e("label",{staticClass:"form-label",attrs:{for:"description"}},[i._v("Description")]),i._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:i.new_experiment.description,expression:"new_experiment.description"}],staticClass:"form-input",attrs:{id:"description",placeholder:"Explain what your experiment covers and its expected learnings",rows:"3"},domProps:{value:i.new_experiment.description},on:{input:function(t){t.target.composing||i.$set(i.new_experiment,"description",t.target.value)}}})])])]),i._v(" "),e("div",{staticClass:"divider-vert",attrs:{"data-content":"OR"}}),i._v(" "),e("div",{staticClass:"column"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"expfile"}},[i._v("Experiment File")]),i._v(" "),e("input",{ref:"expfile",staticClass:"form-input",attrs:{id:"expfile",type:"file"},on:{change:i.handleFileUpload}})])])]),i._v(" "),i._m(1),i._v(" "),e("div",{staticClass:"column col-12"},[e("form",[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"title"}},[i._v("Workspace")]),i._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:i.workspace_id,expression:"workspace_id"}],staticClass:"form-select",attrs:{id:"workspace"},on:{change:[function(t){var e=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});i.workspace_id=t.target.multiple?e:e[0]},i.selectWorkspace]}},i._l(i.context.workspaces,function(t){return e("option",{key:t.id,domProps:{value:t.id}},[i._v(i._s(t.name))])}),0)])])])])]),i._v(" "),e("div",{staticClass:"card-footer"},[e("div",{staticClass:"form-group"},[e("button",{staticClass:"btn btn-primary input-group-btn",on:{click:function(t){return t.preventDefault(),i.newExperiment.apply(null,arguments)}}},[i._v("Create experiment")])])])])])])])},[function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"card-header"},[e("div",{staticClass:"card-title h5"},[t._v("Create a new Experiment")]),t._v(" "),e("div",{staticClass:"card-subtitle text-gray"},[t._v("Declare and share a new Chaos Engineering experiment")])])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"column col-12"},[t("div",{staticClass:"divider"})])}],!1,null,null,null);e.default=i.exports}}]);